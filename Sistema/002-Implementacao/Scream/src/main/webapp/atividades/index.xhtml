<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	template="/WEB-INF/template/template.xhtml">

	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	</h:head>

	<ui:define name="content">
	
		<f:metadata>
			<f:viewParam name="sprintSelecionada"
				value="#{atividadeController.sprintSelecionado.id}" />
			<f:viewAction action="#{atividadeController.prepararAtividade}" />

		</f:metadata>
		
		<h:form onkeypress="if (event.keyCode == 13) {return false; }">

			<div
				style="float: none; position: relative; text-align: center; font-size: 18px; color: #0274A8">
				<p:outputLabel value="Atividades da Sprint #{atividadeController.sprintSelecionada.descricao}" />
				
				<p:commandButton icon="ui-icon-gear" value="Iniciar" style="font-size: 14px; position: relative; left: 280px"
				 action="#{atividadeController.startarSprint()}" update="msgs">						
				</p:commandButton>
				
				<p:commandButton value="finalizar" style="font-size: 14px; position: relative; left: 280px"
				 action="#{atividadeController.finalizarSprint()}" update="msgs">						
				</p:commandButton>
					
					
				<p:commandButton icon="ui-icon-circle-plus"
					oncomplete="PF('atividadeDialog').show()"
					style="font-size: 14px; position: relative; left: 280px" />

				<p:dialog id="atividadeDialog" header="Criar nova Atividade"
					widgetVar="atividadeDialog" resizable="false" draggable="false"
					showEffect="fade" hideEffect="fade" modal="true"
					style="font-size: 12px">
					<p:outputPanel id="painelAtividadeDialog">
						<h:panelGrid columns="2" style="font-size: 12px">

							<h:outputLabel value="Descrição: " />
							<p:inputText maxlength="25" size="30"
								value="#{atividadeController.atividade.descricao}" />

							<h:outputLabel value="Horas: " />
							<p:inputText maxlength="3" size="30"
								value="#{atividadeController.atividade.horas}" />

							<h:outputLabel value="Custo: " />
							<p:inputText maxlength="8" size="30"
								value="#{atividadeController.atividade.valorGasto}" />

							<h:outputLabel for="tipoAtividade" value="Tipo da Atividade " />
							<h:selectOneMenu id="tipoAtividade"
								value="#{atividadeController.atividade.tipoAtividade}"
								required="true" label="Text 3">
								<f:selectItem itemLabel="Análise" itemValue="Analise" />
								<f:selectItem itemLabel="Projeto" itemValue="Projeto" />
								<f:selectItem itemLabel="Desenvolvimento"
									itemValue="Desenvolvimento" />
								<f:selectItem itemLabel="Teste" itemValue="Teste" />
							</h:selectOneMenu>
						</h:panelGrid>
						<br />
						<p:commandButton id="buttonSave" value="Salvar"
							icon="ui-icon-disk" action="#{atividadeController.create}"
							oncomplete="PF('atividadeDialog').hide()" ajax="false" />
					</p:outputPanel>
				</p:dialog>
				<p:dialog id="atividadeDialogEdit" header="Criar nova Atividade"
					widgetVar="atividadeDialogEdit" resizable="false" draggable="false"
					showEffect="fade" hideEffect="fade" modal="true"
					style="font-size: 12px">
					<p:outputPanel id="painelAtividadeDialogEdit">
						<h:panelGrid columns="2" style="font-size: 12px">

							<h:outputLabel value="Descrição: " />
							<p:inputText maxlength="25" size="30"
								value="#{atividadeController.atividadeSelecionada.descricao}" />

							<h:outputLabel value="Horas: " />
							<p:inputText maxlength="3" size="30"
								value="#{atividadeController.atividadeSelecionada.horas}" />

							<h:outputLabel value="Custo: " />
							<p:inputText maxlength="8" size="30"
								value="#{atividadeController.atividadeSelecionada.valorGasto}" />

							<h:outputLabel for="tipoAtividadeEdit" value="Tipo da Atividade " />
							<h:selectOneMenu id="tipoAtividadeEdit"
								value="#{atividadeController.atividadeSelecionada.tipoAtividade}"
								required="true" label="Text 3">
								<f:selectItem itemLabel="Análise" itemValue="Analise" />
								<f:selectItem itemLabel="Projeto" itemValue="Projeto" />
								<f:selectItem itemLabel="Desenvolvimento"
									itemValue="Desenvolvimento" />
								<f:selectItem itemLabel="Teste" itemValue="Teste" />
							</h:selectOneMenu>
						</h:panelGrid>
						<br />
						<p:commandButton id="buttonEdit" value="Editar"
							icon="ui-icon-disk" action="#{atividadeController.update}"
							oncomplete="PF('atividadeDialog').hide()" ajax="false" />
					</p:outputPanel>
				</p:dialog>
			</div>

			<div id="kanban">
				<p:growl id="msgs" showDetail="true" />
				<p:layout resizable="false">
					<p:layoutUnit position="west" resizable="false">

						<div id="conteudo-1">
							<p:dataTable id="datatableItensProduto"
								value="#{atividadeController.findAll()}" var="atividade"
								widgetVar="tabelaAtividade" paginatorAlwaysVisible="false"
								style="margin-top: 20px; " scrollRows="10"
								emptyMessage="Nenhum item encontrado" scrollable="true"
								rowKey="item.id">

								<f:facet name="header">
									<p:outputLabel value="Atividades"
										style="float: none; position: relative; text-align: center; font-size: 18px; color: #0274A8" />
								</f:facet>

								<p:column id="columnDescricao" headerText="Descrição"
									filterBy="#{atividade.descricao}" filterMatchMode="contains"
									filterStyle="display:none" style=" width:170px">
									<h:outputText value="#{atividade.descricao}" />
								</p:column>

								<p:column id="columnHoras" headerText="Horas"
									style="text-align: center; width:40px " filterBy="#{atividade.horas}"
									filterMatchMode="contains" filterStyle="display:none">
									<h:outputText value="#{atividade.horas}" />
								</p:column>

								<p:column id="edit"	style="text-align: center; width:30px">
									<p:commandButton id="buttonEditar"
										process="datatableItensProduto"
										update="@form"	icon="ui-icon-pencil"
										action="#{atividadeController.manterAtividade()}"
										style="font-size:8px"
										oncomplete="PF('atividadeDialogEdit').show()">

										<f:setPropertyActionListener value="#{atividade}"
											target="#{atividadeController.atividadeSelecionada}" />

									</p:commandButton>
								</p:column>

							</p:dataTable>
						</div>
						<!-- <div id="conteudo-1">
							<p:fieldset legend="Atividades" id="fieldSetFormList"
								style="width: 150px">

								<p:dashboard id="listBoard" model="#{atividadeController.model}">
									<p:panel id="list" header="Algo">
										<h:outputText value="Descrição de algo" />
										<h1 />
										<p:button icon="ui-icon-view" />
										<p:button icon="ui-icon-pencil" />

									</p:panel>

								</p:dashboard>


							</p:fieldset>
						</div> -->
					</p:layoutUnit>
					<p:layoutUnit position="center" resizable="false">
						<div id="conteudo-1-1">

							<p:fieldset legend="A fazer" id="fieldSetFormTitle"
								style="width: 150px; height: 430px;">

								<p:dashboard id="fazerBoard"
									model="#{atividadeController.model}">
									<p:panel id="sports" header="Scream ">
										<h:outputText value="Descrição do Scream" />
										<h1 />
										<p:button icon="ui-icon-view" />
										<p:button icon="ui-icon-pencil" />
									</p:panel>

								</p:dashboard>

							</p:fieldset>
						</div>

						<div id="conteudo-2-1">
							<p:fieldset legend="Fazendo" id="fieldSetFormFazendo"
								style="width: 150px; height: 430px;">

								<p:dashboard id="fazendoBoard"
									model="#{atividadeController.model}">
									<p:panel id="fazendo" header="Info-Saúde">
										<h:outputText value="Descrição do Info-Saúde" />
										<h1 />
										<p:button icon="ui-icon-view" />
										<p:button icon="ui-icon-pencil" />
									</p:panel>

								</p:dashboard>


							</p:fieldset>
						</div>
						<!--<p:droppable for="fieldSetFormFazendo " tolerance="touch"
                             activeStyleClass="ui-state-highlight" 
                             >
                                 
                </p:droppable> -->

						<div id="conteudo-2-2">
							<p:fieldset legend="Feito" id="fieldSetFormFeito"
								style="width: 150px; height: 430px;">

								<p:dashboard id="feitoBoard"
									model="#{atividadeController.model}">
									<p:panel id="feito" header="Licita">
										<h:outputText value="Descrição do Licita" />
										<h1 />
										<p:button icon="ui-icon-view" />
										<p:button icon="ui-icon-pencil" />

									</p:panel>

								</p:dashboard>


							</p:fieldset>
						</div>
					</p:layoutUnit>
				</p:layout>
			</div>
		</h:form>
	</ui:define>

</ui:composition>